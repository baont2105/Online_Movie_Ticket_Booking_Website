<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Đặt Vé</title>

<!-- Bootstrap -->
<link rel="stylesheet"
	th:href="@{/bootstrap-5.3.3-dist/css/bootstrap.min.css}">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<!-- CSS Custom -->
<link rel="stylesheet" th:href="@{/css/general.css}">
<link rel="stylesheet" th:href="@{/css/seat.css}">
</head>

<body>
	<div class="container-fluid m-0 p-0"
		style="background: url(/image/Background/bg_pattern.png) repeat left top;">
		<!-- HEADER -->
		<header class="row">
			<!-- NAV MENU -->
			<div th:replace="/components/menu.html"></div>

		</header>

		<!-- Body -->
		<div class="container-fluid mx-0 p-0" style="margin-top: 65px;">
			<!-- Nội dung trang web -->
			<!-- Body -->
			<div class="container-fluid mx-0 p-0" style="margin-top: 100px;">
				<div class="row">
					<div class="col-sm-1 mx-0 p-0"></div>
					<div class="col-sm-10 mx-0 p-0">
						<div class="container-fluid bg-white border rounded-2 mb-5 p-5">
							<div class="stepper">
								<!-- Step 2: Chọn Ghế Ngồi -->
								<div ng-show="step === 2">
									<h2 class="form-title">Chọn Ghế Ngồi Cho Suất Chiếu</h2>
									<div class="row">
										<div class="col-sm-9">

											<h3
												th:text="'Phòng: ' + ${showtime.room.name} + ' | ' + 
               'Chi nhánh: ' + ${showtime.branch.name}"></h3>
											<h3
												th:text="'Phim: ' + (${#strings.length(showtime.movie.name) > 20 ? 
               #strings.substring(showtime.movie.name, 0, 15) + '...' : showtime.movie.name})"></h3>
											<h3
												th:text="'Suất chiếu: ' + ${#temporals.format(showtime.startTime, 'HH:mm dd/MM/yyyy')}"></h3>

											<form method="post" action="/booking/confirm-seats">
												<input type="hidden" name="showtimeId"
													th:value="${showtime.showtimeId}">

												<div class="seat-layout">
													<div th:each="seat : ${seats}" class="seat-container">
														<input type="checkbox" name="seatIds"
															th:value="${seat.seatId}"
															th:disabled="${bookedSeatIds.contains(seat.seatId)}">
														<label th:text="${seat.seatNumber}"></label>
													</div>
												</div>

												<button type="submit">Xác nhận ghế</button>
											</form>
											<!-- 
											<div class="seat-row" ng-repeat="row in seats">
												<button ng-repeat="seat in row" ng-class="{
			                                            'standard': seat.type === 'standard', 
			                                            'vip': seat.type === 'vip',
			                                            'booked': seat.status === 'booked',
			                                            'selected': seat.selected
			                                        }" ng-disabled="seat.status === 'booked'" ng-click="selectSeat(seat)"
													style="width: 40px;">
													{{ seat.id }}
												</button>
											</div>
										 -->
										</div>
										<div class="col-sm-3 p-0"
											style="background-color: #e9ecef; border-radius: 10px; position: relative; max-height: 400px;">
											<div class="summary p-3">
												<div class="card-header">
													<h3 class="fw-bold">Ghế đã chọn</h3>
												</div>
												<div class="card-body">
													<ul>
														<li ng-repeat="seat in selectedSeats">{{ seat.id }} -
															{{ seat.type }}</li>
													</ul>
												</div>
											</div>
											<div
												style="position: relative; bottom: 0; width: 100%; margin-bottom: 5px;">
												<p class="px-3">
													<strong>Tổng cộng:</strong> {{ total }} VND
												</p>
												<div class="d-flex justify-content-between">
													<a th:href="@{/booking/step1/0}">
														<button type="button" class="btn btn-secondary">Quay
															lại</button>
													</a> <a th:href="@{/booking/step3/0}">
														<button type="button" class="btn btn-primary">Tiếp
															tục</button>
													</a>

												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="col-sm-1 mx-0 p-0"></div>
				</div>
			</div>

		</div>

		<!-- Footer -->
		<footer class="bg-body-tertiary p-0 m-0"
			th:replace="/components/footer.html"></footer>

		<script th:src="@{'/bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js'}"></script>
</body>

</html>